{% assign tabs = shop.metaobjects.product_details_tab_list['default'].value.product_details_tab.value %}

test1{{ tabs }}
test2{{ shop.metaobjects.product_details_tab_list['default'].value.product_details_tab }}
<div class="product-details-tab">
  <div class="product-details-tab__inner page-width">
    <div class="product-details-tab__grid">
      <div class="product-details-tab__tabs">
        {% for tab in tabs %}
          <button
            class="product-details-tab__tab-button{% if forloop.first %} is-active{% endif %}"
            data-tab-index="{{ forloop.index0 }}"
          >
            {{ tab.heading | escape }}
          </button>
        {% endfor %}
      </div>
      <div class="product-details-tab__content-area">
        {% for tab in tabs %}
          <div
            class="product-details-tab__content-block{% if forloop.first %} is-active{% endif %}"
            data-tab-content-index="{{ forloop.index0 }}"
          >
            <div class="product-details-tab__text">
              {{ tab.content | metafield_tag }}
            </div>
            {% if tab.image %}
              <div class="product-details-tab__image-wrapper">
                <img
                  src="{{ tab.image | image_url: width: 800 }}"
                  alt="{{ tab.image.alt | escape }}"
                  class="product-details-tab__image"
                  loading="lazy"
                />
              </div>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

<style>
  .product-details-tab__grid {
    display: grid;
    grid-template-columns: 1fr 2fr;
    gap: 3rem;
    align-items: start;
  }

  .product-details-tab__tab-button {
    background: none;
    border: none;
    padding: 0.5rem 0;
    cursor: pointer;
    font-weight: 500;
    opacity: 0.5;
    text-align: left;
    border-bottom: 1px solid transparent;
    transition: opacity 0.2s, border-color 0.2s;
  }

  .product-details-tab__tab-button.is-active {
    opacity: 1;
    border-bottom: 1px solid black;
  }

  .product-details-tab__content-block {
    display: none;
  }

  .product-details-tab__content-block.is-active {
    display: block;
  }

  .product-details-tab__image-wrapper {
    margin-top: 1.5rem;
  }

  .product-details-tab__image {
    width: 100%;
    height: auto;
    display: block;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const buttons = document.querySelectorAll(".product-details-tab__tab-button");
    const contents = document.querySelectorAll(".product-details-tab__content-block");

    buttons.forEach((button, index) => {
      button.addEventListener("click", function () {
        buttons.forEach(btn => btn.classList.remove("is-active"));
        contents.forEach(content => content.classList.remove("is-active"));

        button.classList.add("is-active");
        contents[index].classList.add("is-active");
      });
    });
  });
</script>

{% schema %}
{
  "name": "Product Details Tab",
  "presets": [
    {
      "name": "Product Details Tab"
    }
  ]
}
{% endschema %}
