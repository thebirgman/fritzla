{% comment %}
  Reviews Carousel Section
{% endcomment %}

<section 
  class="reviews-carousel section-{{ section.id }}"
  style="
    background: {{ section.settings.bg_color }};
    color: {{ section.settings.text_color }};
    padding: 60px 0;
  "
>
  <div class="page-width">
    {% if section.settings.heading != blank %}
      <h2 
        class="reviews-carousel__heading"
        style="font-size: {{ section.settings.font_size }}px; color: {{ section.settings.text_color }}"
      >
        {{ section.settings.heading }}
      </h2>
    {% endif %}

    <div class="reviews-carousel__wrapper">
      
      <!-- LEFT ARROW (SVG placeholder) -->
      <button class="reviews-carousel__arrow left-arrow">
        <svg width="5" height="9" viewBox="0 0 5 9" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M4.39003 4.38981L0.64045 8.1392C0.605612 8.17404 0.564254 8.20167 0.518737 8.22052C0.473219 8.23937 0.424434 8.24908 0.375167 8.24908C0.325899 8.24908 0.277114 8.23937 0.231596 8.22052C0.186079 8.20167 0.144721 8.17404 0.109884 8.1392C0.0750461 8.10436 0.0474116 8.06301 0.0285577 8.01749C0.0097038 7.97198 0 7.92319 0 7.87393C0 7.82466 0.0097038 7.77588 0.0285577 7.73037C0.0474116 7.68485 0.0750461 7.6435 0.109884 7.60866L3.59465 4.12454L0.109884 0.640417C0.0395262 0.570063 -7.41335e-10 0.474643 0 0.375148C7.41336e-10 0.275652 0.0395262 0.180232 0.109884 0.109878C0.180241 0.0395243 0.275666 7.41298e-10 0.375167 0C0.474667 -7.41298e-10 0.570092 0.0395243 0.64045 0.109878L4.39003 3.85927C4.42489 3.89409 4.45255 3.93544 4.47142 3.98096C4.49029 4.02648 4.5 4.07527 4.5 4.12454C4.5 4.17381 4.49029 4.2226 4.47142 4.26812C4.45255 4.31363 4.42489 4.35499 4.39003 4.38981Z" fill="#FAFAFA"/>
        </svg>
      </button>

      <div class="reviews-carousel__track">

        {% for block in section.blocks %}
          <div 
            class="reviews-carousel__card"
            style="
              background: {{ block.settings.card_bg }};
              color: {{ block.settings.card_text }};
            "
            {{ block.shopify_attributes }}
          >

            <div class="reviews-carousel__stars">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M15.5967 7.32255L12.3805 10.1993L13.3604 14.5015C13.4145 14.735 13.4005 14.9799 13.3204 15.2053C13.2402 15.4306 13.0975 15.6263 12.9101 15.7676C12.7227 15.9089 12.4992 15.9894 12.2677 15.999C12.0361 16.0087 11.8071 15.9469 11.6094 15.8217L8.00014 13.5191L4.38876 15.8217C4.19109 15.9462 3.9623 16.0073 3.73119 15.9974C3.50008 15.9874 3.27699 15.9067 3.09 15.7656C2.90302 15.6244 2.76051 15.4291 2.68041 15.2041C2.60031 14.9792 2.58621 14.7347 2.63988 14.5015L3.62331 10.1993L0.407157 7.32255C0.232268 7.16587 0.105785 6.95925 0.043504 6.72849C-0.0187769 6.49774 -0.0140954 6.25308 0.0569637 6.02506C0.128023 5.79705 0.26231 5.59579 0.443055 5.44642C0.6238 5.29705 0.842993 5.20618 1.07326 5.18517L5.29 4.83252L6.91666 0.751869C7.0047 0.529476 7.15456 0.339247 7.34717 0.205366C7.53978 0.0714847 7.76645 0 7.99836 0C8.23026 0 8.45693 0.0714847 8.64954 0.205366C8.84215 0.339247 8.99201 0.529476 9.08006 0.751869L10.706 4.83252L14.9227 5.18517C15.1535 5.2054 15.3733 5.29576 15.5547 5.44492C15.7361 5.59409 15.871 5.79543 15.9425 6.02372C16.014 6.25201 16.0189 6.4971 15.9567 6.72827C15.8944 6.95945 15.7677 7.16643 15.5924 7.32329L15.5967 7.32255Z" fill="#CB9D36"/>
                </svg>
            </div>

            <p class="reviews-carousel__text">
              {{ block.settings.review_text }}
            </p>

          </div>
        {% endfor %}

      </div>

      <!-- RIGHT ARROW (SVG placeholder) -->
      <button class="reviews-carousel__arrow right-arrow">
        <svg width="5" height="9" viewBox="0 0 5 9" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4.39003 4.38981L0.64045 8.1392C0.605612 8.17404 0.564254 8.20167 0.518737 8.22052C0.473219 8.23937 0.424434 8.24908 0.375167 8.24908C0.325899 8.24908 0.277114 8.23937 0.231596 8.22052C0.186079 8.20167 0.144721 8.17404 0.109884 8.1392C0.0750461 8.10436 0.0474116 8.06301 0.0285577 8.01749C0.0097038 7.97198 0 7.92319 0 7.87393C0 7.82466 0.0097038 7.77588 0.0285577 7.73037C0.0474116 7.68485 0.0750461 7.6435 0.109884 7.60866L3.59465 4.12454L0.109884 0.640417C0.0395262 0.570063 -7.41335e-10 0.474643 0 0.375148C7.41336e-10 0.275652 0.0395262 0.180232 0.109884 0.109878C0.180241 0.0395243 0.275666 7.41298e-10 0.375167 0C0.474667 -7.41298e-10 0.570092 0.0395243 0.64045 0.109878L4.39003 3.85927C4.42489 3.89409 4.45255 3.93544 4.47142 3.98096C4.49029 4.02648 4.5 4.07527 4.5 4.12454C4.5 4.17381 4.49029 4.2226 4.47142 4.26812C4.45255 4.31363 4.42489 4.35499 4.39003 4.38981Z" fill="#FAFAFA"/>
        </svg>
      </button>

    </div>
  </div>
</section>

<style>
/* ---------- GENERAL ---------- */
.reviews-carousel__heading {
  text-align: center;
  margin-bottom: 40px;
}

/* ---------- WRAPPER ---------- */
.reviews-carousel__wrapper {
  position: relative;
  display: flex;
  align-items: center;
}

/* ---------- ARROWS ---------- */
.reviews-carousel__arrow {
  background: none;
  border: none;
  cursor: pointer;
  padding: 10px;
  z-index: 10;
}

/* ---------- CAROUSEL TRACK ---------- */
.reviews-carousel__track {
  display: flex;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  gap: 20px;
  padding: 20px 0;
  scrollbar-width: none; /* Firefox */
}

.reviews-carousel__track::-webkit-scrollbar {
  display: none; /* Chrome */
}

/* ---------- CARD ---------- */
.reviews-carousel__card {
  flex: 0 0 320px;
  padding: 25px 30px;
  border-radius: 16px;
  scroll-snap-align: center;
  box-shadow: 0px 4px 20px rgba(0,0,0,0.05);
}

/* Stars placeholder container */
.reviews-carousel__stars {
  display: flex;
  justify-content: center;
  margin-bottom: 15px;
}

/* Review text */
.reviews-carousel__text {
  font-size: 15px;
  text-align: center;
  line-height: 1.4;
}
</style>

<script>
/* OPTIONAL JS NAVIGATION (UNCOMMENT IF YOU WANT CLICKABLE ARROWS)

document.addEventListener("DOMContentLoaded", () => {
  const track = document.querySelector('.section-{{ section.id }} .reviews-carousel__track');
  const left = document.querySelector('.section-{{ section.id }} .left-arrow');
  const right = document.querySelector('.section-{{ section.id }} .right-arrow');

  const scrollAmount = 350;

  right.addEventListener("click", () => {
    track.scrollBy({ left: scrollAmount, behavior: "smooth" });
  });

  left.addEventListener("click", () => {
    track.scrollBy({ left: -scrollAmount, behavior: "smooth" });
  });
});
*/
</script>

{% schema %}
{
  "name": "Reviews Carousel",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Detta säger våra kunder om oss!"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background color",
      "default": "#f8f0eb"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Heading text color",
      "default": "#3c2b20"
    },
    {
      "type": "range",
      "id": "font_size",
      "label": "Heading font size",
      "min": 16,
      "max": 60,
      "step": 1,
      "default": 28
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "color",
          "id": "card_bg",
          "label": "Card background",
          "default": "#ffffff"
        },
        {
          "type": "color",
          "id": "card_text",
          "label": "Card text color",
          "default": "#333333"
        },
        {
          "type": "color",
          "id": "star_color",
          "label": "Star color",
          "default": "#d4a253"
        },
        {
          "type": "textarea",
          "id": "review_text",
          "label": "Review text",
          "default": "Fantastiskt utbud!"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Reviews Carousel"
    }
  ]
}
{% endschema %}
